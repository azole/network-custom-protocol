# 自定義協定範例

## 簡介

基於 TCP 提供 4 種自定義協定的範例

- 第 1 碼為協定種類 1, 2, 3, 4
- 第 2 碼為指定操作
  - w: 寫入
  - r: 讀取
  - d: 刪除
  - l: 列出

測試方式:

- server
  ```bash
  npm start
  ```
- client
  ```bash
  nc -v 127.0.0.1 5567
  ```

### 協定 1: 固定分隔符號

用固定的分隔符號 ; 來分隔資料

範例:

```
1w;key1;1234567890
```

- 1 是指定使用協定 1
- w 是寫入
- 接下來以 ; 分隔
  - 第一個欄位是 key
  - 第二個欄位是 value

### 協定 2: 固定長度

範例:

```
1wkey1 1234567890
```

- 1 是指定使用協定 1
- w 是寫入
- 接下來的 5 個字元是 key，不足補空白
- 接下來的 10 個字元是 value，不足補空白，超過會被截斷

### 協定 3: 長度標示

範例:

```
3w4 key2101234567890
```

- 3 是指定使用協定 3
- w 是寫入
- 接下來的 2 個字元是 key 的長度，不足留空白
- 因為指定長度 4，所以接下來的 4 個字元是 key
- 接下來的 2 個字元是 vlue 的長度，不足留空白
- 因為指定長度 10，所以接下來的 10 個字元是 value

### 協定 4: JSON 格式

範例:

```
4{"command": "w", "key": "key1", "value":"1234567890"}
```

## 思考

各自的優缺點為何？
